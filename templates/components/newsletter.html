<!-- Simple Newsletter Component -->
<div class="text-center">
    <!-- Title -->
    <h3 class="text-xl font-playfair font-semibold text-neutral-800 mb-2">Join Our Newsletter</h3>
    
    <!-- Caption -->
    <p class="text-neutral-600 mb-6">Stay updated with new artworks and exhibitions</p>
    
    <!-- Newsletter Form -->
    <form method="post" action="{% url 'htmx_newsletter' %}" id="newsletter-form" class="max-w-md mx-auto">
        {% csrf_token %}
        
        <!-- Success/Error Messages -->
        <div id="newsletter-messages" class="mb-4" style="display: none;"></div>
        
        <!-- Email Input -->
        <div class="flex flex-col sm:flex-row gap-3">
            <input type="email" 
                   name="email" 
                   placeholder="Enter your email"
                   required
                   class="flex-1 px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm">
            
            <!-- Subscribe Button -->
            <button type="submit" 
                    class="btn-primary px-6 py-3 whitespace-nowrap"
                    id="newsletter-submit">
                <span id="submit-text">Subscribe</span>
            </button>
        </div>
    </form>
</div>

<!-- Simple Newsletter JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('newsletter-form');
    const submitButton = document.getElementById('newsletter-submit');
    const submitText = document.getElementById('submit-text');
    const messagesContainer = document.getElementById('newsletter-messages');

    if (form) {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(form);
            const email = formData.get('email');
            
            if (!email) {
                showMessage('error', 'Please enter your email address.');
                return;
            }
            
            // Show loading state
            submitButton.disabled = true;
            submitText.textContent = 'Subscribing...';
            submitButton.classList.add('opacity-75');
            
            // Submit form
            fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': formData.get('csrfmiddlewaretoken')
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showMessage('success', 'Thank you for subscribing!');
                    form.reset();
                } else {
                    showMessage('error', 'There was an error. Please try again.');
                }
            })
            .catch(error => {
                showMessage('error', 'There was an error. Please try again.');
            })
            .finally(() => {
                submitButton.disabled = false;
                submitText.textContent = 'Subscribe';
                submitButton.classList.remove('opacity-75');
            });
        });
    }
    
    function showMessage(type, message) {
        const messageClass = type === 'success' 
            ? 'bg-green-50 text-green-800 border border-green-200' 
            : 'bg-red-50 text-red-800 border border-red-200';
        
        messagesContainer.innerHTML = `
            <div class="p-3 rounded-lg ${messageClass}">
                <p class="text-sm">${message}</p>
            </div>
        `;
        messagesContainer.style.display = 'block';
        
        if (type === 'success') {
            setTimeout(() => {
                messagesContainer.style.display = 'none';
            }, 4000);
        }
    }
});
</script>